<!DOCTYPE html><html><head>
<title>Output</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<base target="_blank" />
<link rel="stylesheet" href="js/sunman.css">
</head>

<body>
<span id="loadingf" style="font-size:0.65em;padding-left:45px;">「2．山人拆分檢索」字體加載中...</span>
<span id="loading" style="font-size:0.65em;padding-left:45px;">「2．山人拆分檢索」數據加載中，請稍候...</span>
<span class="Line Output" id="output"><br><br><br></span>


<script>
    function loadScript(src) {
        return new Promise((resolve, reject) => {
            const script = document.createElement('script');
            script.src = src;
            script.onload = () => resolve();
            script.onerror = () => reject(new Error(`加载脚本失败: ${src}`));
            document.head.appendChild(script);
        });
    }

    async function loadScripts() {
        const scriptFiles = [
            'js/decompose-part1.js',
            'js/decompose-part2.js',
            'js/decompose-part3.js',
            'js/decompose-part4.js',
            'js/decompose-part5.js',
            'js/decompose-part6.js',
            'js/decompose-part7.js',
            'js/decompose-part8.js'
        ];

        // 显示加载提示
        document.getElementById('loading').style.display = 'block';

        // 等待所有脚本加载完成
        try {
            await Promise.all(scriptFiles.map(file => loadScript(file)));
            // 所有脚本加载完成后合并数据
            var dt = dt1.concat(dt2, dt3, dt4, dt5, dt6, dt7, dt8);
         //    console.log('合并后的数据:', dt);
        } catch (error) {
            console.error(error);
        } finally {
            // 隐藏加载提示并显示内容
            document.getElementById('loading').style.display = 'none';
           //   document.getElementById('content').style.display = 'block';
        }
    }

    // 初始化加载过程
    loadScripts();
</script>

    <script src="js/decompose-part1.js"></script>
    <script src="js/decompose-part2.js"></script>
    <script src="js/decompose-part3.js"></script>
    <script src="js/decompose-part4.js"></script>
    <script src="js/decompose-part5.js"></script>
    <script src="js/decompose-part6.js"></script>
    <script src="js/decompose-part7.js"></script>
    <script src="js/decompose-part8.js"></script>

<script>

 var dt = dt1.concat(dt2, dt3, dt4, dt5, dt6, dt7, dt8);

    function searchCharacter(input) {
        var output = document.getElementById('output'); // 获取输出区域
        output.innerHTML = ''; // 清空输出区域
        if (input) {
            var results = dt.filter(entry => entry.startsWith(input)); // 根据输入内容过滤结果
            if (results.length > 0) {
                // 去掉第一个半角冒号前的部分
                var filteredResults = results.map(entry => {
                    let index = entry.indexOf(':'); // 找到第一个冒号的位置
                    return index !== -1 ? entry.substring(index + 1) : ''; // 返回冒号后的部分
                }).join('<br>'); // 将结果连接为字符串
                output.innerHTML = filteredResults; // 将结果显示在输出区域
            } else {
                output.innerHTML = '<span style="color:gray;font-size:0.75em;font-weight:lighter;">未找到相關結果，請輸入單個漢字</span>'; // 找不到结果时的提示
            }
        }
    }


       window.addEventListener('message', function(event) {
            const input = event.data; // 获取从父文档传来的输入
          //   console.log('Received message:', event.data);
            searchCharacter(input); // 调用查询函数
        });

/*        // 函数用于计算并发送高度
        function sendHeight() {
            const height = document.body.scrollHeight; // 获取内容的高度
            window.parent.postMessage(height, '*'); // 发送给父文档
        }

        // 在内容加载完成后发送高度
        window.onload = sendHeight;
        // 如果内容动态变化，也可以在内容变化后调用 sendHeight
*/



</script>


<!-- 字體1 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/fontfaceobserver/2.1.0/fontfaceobserver.standalone.js"></script>
<script>
    // 定义一个异步加载的函数
    function loadFonts() {
        const font1 = new FontFaceObserver('ziti1');
        const font2 = new FontFaceObserver('ziti2');
        const font3 = new FontFaceObserver('ziti3');
        const font4 = new FontFaceObserver('ziti4');

        // 显示加载提示
        const loadingfDiv = document.getElementById('loadingf');
        loadingfDiv.style.display = 'block';

        // 使用 Promise.all 并行加载所有字体
        Promise.all([
            font1.load(),
            font2.load(),
            font3.load(),
            font4.load()
        ]).then(function () {
            // 为 HTML 添加一个 class，表示字体已加载
            document.documentElement.classList.add('fonts-loaded');
        }).catch(function (err) {
       //      console.error('字体加载失败:', err);
        }).finally(function () {
            // 隐藏加载提示
            loadingfDiv.style.display = 'none';
        });
    }

    // 调用字体加载函数
    loadFonts();
</script>

</body>
</html>
